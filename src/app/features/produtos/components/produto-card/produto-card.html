<div class="produto-card" [class.indisponivel]="!isDisponivel()">
  <a [routerLink]="['/produtos', produto.id]" class="produto-link">
    <!-- Badge de Desconto -->
    @if (isPromocao() && getDesconto() > 0) {
      <div class="badge-desconto">
        -{{ getDesconto() }}%
      </div>
    }

    <!-- Badge de Indisponível -->
    @if (!isDisponivel()) {
      <div class="badge-indisponivel">
        Indisponível
      </div>
    }

    <!-- Imagem do Produto -->
    <div class="produto-imagem">
      <img [src]="getImagemProduto()" [alt]="produto.nome" loading="lazy">
    </div>

    <!-- Informações do Produto -->
    <div class="produto-info">
      <h3 class="produto-nome">{{ produto.nome }}</h3>

      @if (produto.descricao) {
        <p class="produto-descricao">{{ produto.descricao }}</p>
      }

      <!-- Preços -->
      <div class="produto-precos">
        @if (isPromocao()) {
          <span class="preco-antigo">{{ produto.preco | currency }}</span>
          <span class="preco-atual promocao">{{ produto.precoPromocional | currency }}</span>
        } @else {
          <span class="preco-atual">{{ produto.preco | currency }}</span>
        }
      </div>

      <!-- Estoque -->
      @if (isDisponivel()) {
        @if (produto.estoque <= 5) {
          <p class="estoque-baixo">Últimas {{ produto.estoque }} unidades!</p>
        }
      }
    </div>

    <!-- Botão Adicionar ao Carrinho -->
    <div class="produto-acoes">
      @if (isDisponivel()) {
        <button
          type="button"
          class="btn-adicionar-carrinho"
          (click)="onAdicionarCarrinho($event)"
        >
          Adicionar ao Carrinho
        </button>
      } @else {
        <button type="button" class="btn-indisponivel" disabled>
          Produto Indisponível
        </button>
      }
    </div>
  </a>
</div>
